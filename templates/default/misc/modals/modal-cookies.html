{literal}
<style>
    .modal-cookies {
        margin: 1rem;
        border-radius: 1rem;
        overflow: hidden;
        width: 90%;
        max-width: 850px;
        position: fixed;
        z-index: 100;
        right: 0;
        bottom: 0;
        font-size: 14px;
        color: black;
        line-height: 1.4;
        background: white;
        box-shadow: 0px 8px 25px 0px rgba(0, 0, 0, 0.1);
        visibility: hidden;
        opacity: 0;
        transition: all 0.3s;
    }
    .modal-cookies a {
        color: #6B7280;
    }
    .modal-cookies.open {
        visibility: visible;
        opacity: 1;
    }
    .modal-cookies-nav {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
    }
    .modal-cookies-nav-item {
        padding: 8px 4px;
        color: #404040;
        border-bottom: 1px solid #f3f4f6;
        font-weight: 600;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    .modal-cookies-nav-item.active {
        color: white;
        background: #01A7B7;
    }
    .modal-cookies-content-container {
        padding: 16px;
        max-height: 500px;
        overflow-y: auto;
    }
    .modal-cookies-title {
        font-size: 18px;
        font-weight: 700;
        margin-bottom: 4px;
    }
    .modal-cookies-options {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        border-bottom: 1px solid #d1d5db;
        border-top: 1px solid #d1d5db;
    }
    .modal-cookies-option {
        padding: 0 8px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 6px;
        font-size: 16px;
        font-weight: 700;
        height: 82px;
    }
    .modal-cookies-option-empty {
        color: #01A7B7;
    }
    .modal-cookies-option:not(:last-child) {
        border-right: 1px solid #d1d5db;
    }
    .modal-cookies-switch {
        position: relative;
        display: inline-block;
        width: 44px;
        height: 24px;
    }
    .modal-cookies-switch input {
        opacity: 0;
        width: 0;
        height: 0;
    }
    .modal-cookies-slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #e0e0e0;
        transition: 0.4s;
        border-radius: 100px;
    }
    .modal-cookies-slider:before {
        position: absolute;
        content: "";
        height: 20px;
        width: 20px;
        left: 2px;
        bottom: 2px;
        background-color: white;
        transition: 0.4s;
        border-radius: 50%;
    }
    input:checked + .modal-cookies-slider {
        background-color: #01A7B7;
    }
    input:checked:disabled + .modal-cookies-slider {
        background-color: #e0e0e0;
    }
    input:focus + .modal-cookies-slider {
        box-shadow: 0 0 1px #6B7280;
    }
    input:checked + .modal-cookies-slider:before {
        transform: translateX(20px);
    }
    .modal-cookies-bottom {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding-left: 16px;
    }
    .modal-cookies-argonium-logo {
        height: 18px;
        width: auto;
        margin-top: 8px;
    }
    .modal-cookies-buttons {
        display: flex;
        gap: 8px;
        justify-content: flex-end;
        padding: 16px;
    }
    .modal-cookies-allow-all {
        border: none;
    }
    .cookies-widget {
        position: fixed;
        z-index: 100;
        right: 0;
        bottom: 0;
        font-size: 14px;
        color: black;
        line-height: 1.4;
        background: white;
        border-top-left-radius: 5px;
        box-shadow: 0px 8px 25px 0px rgba(0, 0, 0, 0.1);
        transition: all 0.3s;
        width: fit-content;
    }
    .cookies-widget-title {
        padding: 12px 16px;
        font-weight: 600;
        display: flex;
        justify-content: space-between;
        align-items: center;
        line-height: 1;
        cursor: pointer;
    }
    .cookies-widget-status {
        border-top: 1px solid #d1d5db;
        border-bottom: 1px solid #d1d5db;
        padding: 12px;
    }
    .cookies-widget-content-title {
        font-weight: 600;
        margin-bottom: 8px;
    }
    .cookies-widget-list-item {
        display: flex;
        gap: 2px;
        align-items: center;
    }
    .cookies-widget-details {
        display: flex;
        flex-direction: column;
        gap: 12px;
        font-size: 12px;
        margin-top: 12px;
    }
    .cookies-widget-details-title {
        font-weight: 700;
    }
    .cookies-widget-buttons {
        padding: 12px;
        display: flex;
        gap: 8px;
        justify-content: flex-end;
    }
    .cookies-widget-cancel {
        font-size: 16px;
    }
    .cookies-widget-change {
        font-size: 16px;
        border: none;
    }
    @media screen and (max-width: 600px) {
        .modal-cookies {
            width: calc(100% - 20px);
        }
        .modal-cookies-options {
            grid-template-columns: 1fr;
        }
        .modal-cookies-option {
            flex-direction: row;
            justify-content: space-between;
            padding: 16px;
        }
        .modal-cookies-option {
            height: auto;
        }
        .modal-cookies-option:not(:last-child) {
            border: none;
        }
        .modal-cookies-content-container {
            max-height: 160px;
            overflow-y: auto;
        }
        .modal-cookies-bottom {
            flex-direction: column-reverse;
            padding: 0 0 16px 0;
        }
        .modal-cookies-argonium {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
    }
</style>
{/literal}
<div class="modal-cookies">
    <div class="modal-cookies-nav">
        <div class="modal-cookies-nav-item active" data-tab="agreement">{$LANG.COOKIES_AGREEMENT}</div>
        <div class="modal-cookies-nav-item" data-tab="details">{$LANG.COOKIES_DETAILS}</div>
        <div class="modal-cookies-nav-item" data-tab="about">O plikach cookie</div>
    </div>
    <div class="modal-cookies-content-container">
        <div class="modal-cookies-content" data-tab="agreement">
            <div class="modal-cookies-title">{$LANG.COOKIES_AGREEMENT_HEADER}</div>
            {$LANG.COOKIES_AGREEMENT_TXT}
        </div>
        <div class="modal-cookies-content" style="display: none" data-tab="details">
            <div class="modal-cookies-title">{$LANG.COOKIES_DETAILS_HEADER_1}</div>
            {$LANG.COOKIES_DETAILS_TXT_1}
            <div class="modal-cookies-title">{$LANG.COOKIES_DETAILS_HEADER_2}</div>
            {$LANG.COOKIES_DETAILS_TXT_2}
        </div>
        <div class="modal-cookies-content" style="display: none" data-tab="about">
            <div class="modal-cookies-title">{$LANG.COOKIES_ABOUT}</div>
            {$LANG.COOKIES_ABOUT_TXT}
        </div>
    </div>
    <div class="modal-cookies-options">
        <div class="modal-cookies-option">
            <div class="modal-cookies-option-title">{$LANG.COOKIES_SWITCH_1}</div>
            <label class="modal-cookies-switch">
                <input type="checkbox" checked name="cookies_necessary" value="granted" disabled />
                <span class="modal-cookies-slider round"></span>
            </label>
        </div>
        <div class="modal-cookies-option">
            <div class="modal-cookies-option-title">{$LANG.COOKIES_SWITCH_2}</div>
            <div class="modal-cookies-option-empty">{$LANG.COOKIES_SWITCH_2_TXT}</div>
        </div>
        <div class="modal-cookies-option">
            <div class="modal-cookies-option-title">{$LANG.COOKIES_SWITCH_3}</div>
            <label class="modal-cookies-switch">
                <input type="checkbox" checked name="cookies_analytics" value="granted" class="gtag-input" data-gtag="analytics_storage" data-ajax="analytics"/>
                <span class="modal-cookies-slider round"></span>
            </label>
        </div>
        <div class="modal-cookies-option">
            <div class="modal-cookies-option-title">{$LANG.COOKIES_SWITCH_4}</div>
            <div class="modal-cookies-option-empty">{$LANG.COOKIES_SWITCH_2_TXT}</div>
        </div>
    </div>
    <div class="modal-cookies-bottom">
        <div class="modal-cookies-argonium">
            <div>{$LANG.COOKIES_IMPLEMENTATION_LINK}</div>
            <a href="https://www.argonium.pl" title="Argonium"><img src="{$TPL_URL}/img/logo-argonium.svg" alt="logo" height="30" width="170" class="modal-cookies-argonium-logo"></a>
        </div>
        <div class="modal-cookies-buttons">
            <button type="button" class="modal-cookies-allow-chosen outline-btn">{$LANG.COOKIES_BUTTON_1}</button>
            <button type="button" class="modal-cookies-allow-all default-btn">{$LANG.COOKIES_BUTTON_2}</button>
        </div>
    </div>

</div>

<div class="cookies-widget" style="display: none">
    <div class="cookies-widget-title">
        <div>Ustawienia plików cookie</div>
        <div class="cookies-widget-close" style="display: none">{include file="misc/icons/icon-close.html"}</div>
    </div>
    <div class="cookies-widget-content" style="display: none">
        <div class="cookies-widget-status">
            <div class="cookies-widget-content-title">Twój obecny stan</div>
            <div class="cookies-widget-list">
                <div class="cookies-widget-list-item" data-type="cookies_necessary">
                    <div class="cookies-widget-list-icon">{include file="misc/icons/icon-lock.html"}</div>
                    <div class="cookies-widget-list-name">{$LANG.COOKIES_SWITCH_1}</div>
                </div>
                <div class="cookies-widget-list-item" data-type="cookies_analytics">
                    <div class="cookies-widget-list-icon">{include file="misc/icons/icon-check.html"}</div>
                    <div class="cookies-widget-list-name">Statystyka</div>
                </div>
            </div>
            <div class="cookies-widget-details">
                <div class="cookies-widget-details-item">
                    <div class="cookies-widget-details-title">Data zgody:</div>
                    <div class="cookies-widget-details-content cookies-widget-date">12 mar 2024 - 10:26:21 CET</div>
                </div>
                <div class="cookies-widget-details-item">
                    <div class="cookies-widget-details-title">Identyfikator Pana(Pani) zgody:</div>
                    <div class="cookies-widget-details-content">o3xS0bwCr9ZSEA7C5yghyKRlTUwbb6UEDw66m8GdSXR5</div>
                </div>
            </div>
        </div>
        <div class="cookies-widget-buttons">
            <button type="button" class="cookies-widget-cancel outline-btn">Anulowanie zgody</button>
            <button type="button" class="cookies-widget-change default-btn">Zmień swoją zgodę</button>
        </div>
    </div>
</div>

{literal}
<script>
    if (!localStorage.getItem("policyChosen")) $(".modal-cookies").addClass("open");
    else $(".cookies-widget").show();

    function closeCookiesModal() {
        localStorage.setItem("policyChosen", new Date());
        $(".modal-cookies").removeClass("open");
        $(".cookies-widget").show();
    }

    $(".modal-cookies-nav-item").on("click", function () {
        $(".modal-cookies-nav-item").removeClass("active");
        $(this).addClass("active");
        const tab = $(this).data("tab");
        $(".modal-cookies-content").hide();
        $(`.modal-cookies-content[data-tab="${tab}"]`).show();
    });

    $(".modal-cookies-allow-chosen").on("click", function () {
        $(".gtag-input").each(function () {
            if ($(this).is(":checked")) {
                localStorage.setItem($(this).prop("name"), $(this).val());
            } else localStorage.setItem($(this).prop("name"), "disabled");
        });
        closeCookiesModal();
        location.reload();
    });

    $(".modal-cookies-allow-all").on("click", function () {
        $(".gtag-input").each(function () {
            localStorage.setItem($(this).prop("name"), $(this).val());
            if (typeof gtag != 'undefined')
                gtag("consent", "update", {
                    [$(this).data("gtag")]: "granted",
                });
        });
        closeCookiesModal();
        localStorage.setItem("ad_user_data", "granted");
        localStorage.setItem("ad_personalization", "granted");
        changeChecked();
        location.reload();
    });

    $(".cookies-widget-cancel").on("click", function () {
        localStorage.removeItem("policyChosen");
        location.reload();
    });

    $(".cookies-widget-change").on("click", function () {
        $(".cookies-widget").hide();
        $(".cookies-widget-content").hide();
        $(".cookies-widget-close").hide();
        $(".modal-cookies").addClass("open");
    });

    $(".cookies-widget-close").on("click", function () {
        $(".cookies-widget-content").hide();
        $(this).hide();
    });

    $(".cookies-widget-title").on("click", function (e) {
        if ($(e.target).parents(".cookies-widget-close").length) return;
        $(".cookies-widget-content").show();
        $(".cookies-widget-close").show();
        $(".cookies-widget-list-item").each(function () {
            const type = $(this).data("type");
            const storageValue = localStorage.getItem(type);
            if ((!storageValue || storageValue == "denied") && type != "cookies_necessary") $(this).hide();
            else $(this).show();
        });
        $(".cookies-widget-date").text(new Date(localStorage.getItem("policyChosen")).toLocaleString());
    });

    function changeChecked(){
        if(localStorage.getItem('cookies_marketing') != 'granted')
            $('[name="cookies_marketing"]').prop( "checked", false );
        else
            $('[name="cookies_marketing"]').prop( "checked", true);
        if(localStorage.getItem('cookies_analytics') != 'granted')
            $('[name="cookies_analytics"]').prop( "checked", false );
        else
            $('[name="cookies_analytics"]').prop( "checked", true);
        if(localStorage.getItem('cookies_preferences') != 'granted')
            $('[name="cookies_preferences"]').prop( "checked", false );
        else
            $('[name="cookies_preferences"]').prop( "checked", true );
    }

    $(document).ready(function(){
        changeChecked();
    });
</script>
{/literal}